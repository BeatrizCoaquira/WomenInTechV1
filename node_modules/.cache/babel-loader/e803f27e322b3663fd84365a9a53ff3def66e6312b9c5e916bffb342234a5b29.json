{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(undefined);export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{// Initialize Facebook SDK\nconst initializeFacebook=()=>{if(window.FB){window.FB.init({appId:'YOUR_FACEBOOK_APP_ID',// Replace with your actual Facebook App ID\ncookie:true,xfbml:true,version:'v18.0'});// Check login status\nwindow.FB.getLoginStatus(response=>{if(response.status==='connected'){fetchUserProfile(response.authResponse.accessToken);}else{setIsLoading(false);}});}else{// Load Facebook SDK\nconst script=document.createElement('script');script.src='https://connect.facebook.net/en_US/sdk.js';script.async=true;script.defer=true;script.crossOrigin='anonymous';document.body.appendChild(script);script.onload=()=>{initializeFacebook();};}};initializeFacebook();},[]);const fetchUserProfile=accessToken=>{window.FB.api('/me',{fields:'id,name,email,picture'},response=>{setUser(response);setIsLoading(false);});};const login=async()=>{return new Promise((resolve,reject)=>{window.FB.login(response=>{if(response.authResponse){fetchUserProfile(response.authResponse.accessToken);resolve();}else{reject(new Error('Login failed'));}},{scope:'public_profile,email,pages_read_engagement,pages_show_list'});});};const logout=()=>{window.FB.logout(()=>{setUser(null);});};const value={user,isAuthenticated:!!user,isLoading,login,logout};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};export const useAuth=()=>{const context=useContext(AuthContext);if(context===undefined){throw new Error('useAuth must be used within an AuthProvider');}return context;};// Extend Window interface for Facebook SDK","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","AuthContext","undefined","AuthProvider","_ref","children","user","setUser","isLoading","setIsLoading","initializeFacebook","window","FB","init","appId","cookie","xfbml","version","getLoginStatus","response","status","fetchUserProfile","authResponse","accessToken","script","document","createElement","src","async","defer","crossOrigin","body","appendChild","onload","api","fields","login","Promise","resolve","reject","Error","scope","logout","value","isAuthenticated","Provider","useAuth","context"],"sources":["D:/Ciclo 6/WomenInTech/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { FacebookUser, AuthContextType } from '../types';\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [user, setUser] = useState<FacebookUser | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Initialize Facebook SDK\r\n    const initializeFacebook = () => {\r\n      if (window.FB) {\r\n        window.FB.init({\r\n          appId: 'YOUR_FACEBOOK_APP_ID', // Replace with your actual Facebook App ID\r\n          cookie: true,\r\n          xfbml: true,\r\n          version: 'v18.0'\r\n        });\r\n\r\n        // Check login status\r\n        window.FB.getLoginStatus((response: any) => {\r\n          if (response.status === 'connected') {\r\n            fetchUserProfile(response.authResponse.accessToken);\r\n          } else {\r\n            setIsLoading(false);\r\n          }\r\n        });\r\n      } else {\r\n        // Load Facebook SDK\r\n        const script = document.createElement('script');\r\n        script.src = 'https://connect.facebook.net/en_US/sdk.js';\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.crossOrigin = 'anonymous';\r\n        document.body.appendChild(script);\r\n        \r\n        script.onload = () => {\r\n          initializeFacebook();\r\n        };\r\n      }\r\n    };\r\n\r\n    initializeFacebook();\r\n  }, []);\r\n\r\n  const fetchUserProfile = (accessToken: string) => {\r\n    window.FB.api('/me', { fields: 'id,name,email,picture' }, (response: FacebookUser) => {\r\n      setUser(response);\r\n      setIsLoading(false);\r\n    });\r\n  };\r\n\r\n  const login = async (): Promise<void> => {\r\n    return new Promise((resolve, reject) => {\r\n      window.FB.login((response: any) => {\r\n        if (response.authResponse) {\r\n          fetchUserProfile(response.authResponse.accessToken);\r\n          resolve();\r\n        } else {\r\n          reject(new Error('Login failed'));\r\n        }\r\n      }, {\r\n        scope: 'public_profile,email,pages_read_engagement,pages_show_list'\r\n      });\r\n    });\r\n  };\r\n\r\n  const logout = () => {\r\n    window.FB.logout(() => {\r\n      setUser(null);\r\n    });\r\n  };\r\n\r\n  const value: AuthContextType = {\r\n    user,\r\n    isAuthenticated: !!user,\r\n    isLoading,\r\n    login,\r\n    logout\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = (): AuthContextType => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n// Extend Window interface for Facebook SDK\r\ndeclare global {\r\n  interface Window {\r\n    FB: any;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}